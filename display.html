<!DOCTYPE html>
<html>
<body>


<script>

var dataZip= getParameterByName("zipcode");
var dataCuisine= getParameterByName("cuisine");
var dataName= getParameterByName("name");


var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (xhttp.readyState == 4 && xhttp.status == 200) {
    myFunction(xhttp);
    }
}
xhttp.open("GET", "restaurants.xml", true);
xhttp.send();

function getParameterByName(name) {
	var formURL = document.location;
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(formURL);
    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

function myFunction(xml) {		
		
	var xmlDoc = xml.responseXML;	
	var restaurant = xmlDoc.getElementsByTagName("restaurant");
	var flag=0;
	var h = document.createElement("H1") 
	var heading=document.createTextNode("Here are your favourite Restaurants!!");
	h.appendChild(heading);
	document.body.appendChild(h);
	var x = document.createElement("STYLE");
	var t = document.createTextNode("body {font: 20px verdana; font-weight: bold; color: black;}");
	x.appendChild(t);
	
	
	
	document.body.style.background = "#f3f3f3 url('images/food2.jpg') no-repeat right top";
	 for(var i =0;i<restaurant.length;i++)
	 {
		 if(restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue==dataZip && dataCuisine=="" && dataName=="")		 
		 {
			flag =1;
			var rName=restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
			var rAddress=restaurant[i].getElementsByTagName("Address")[0].childNodes[0].nodeValue;	
			var rZipCode=restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue;					
			var element=document.createElement("p");	
			var att = document.createAttribute("class");
			att.value="nameStyle";
			element.setAttributeNode(att);
			var rest_Name=document.createTextNode(rName);
			var rest_Addr=document.createTextNode(rAddress);
			var rest_Zip=document.createTextNode(rZipCode);				
			element.appendChild(rest_Name);
			var br = document.createElement("br");				
			element.appendChild(br);
			element.appendChild(rest_Addr);		
			var br = document.createElement("br");				
			element.appendChild(br);			
			element.appendChild(rest_Zip);			
			document.body.appendChild(element);
			document.body.appendChild(x);								
	
		 }
		 
		 if(restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue.toUpperCase()==dataName.toUpperCase() && dataCuisine=="" && dataZip=="")
		 {
			
			flag =1;
			var rName=restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
			var rAddress=restaurant[i].getElementsByTagName("Address")[0].childNodes[0].nodeValue;
			var rZipCode=restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue;
			var element=document.createElement("p");
			var rest_Name=document.createTextNode(rName);			
			var rest_Addr=document.createTextNode(rAddress);
			var rest_Zip=document.createTextNode(rZipCode);
			element.appendChild(rest_Name);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Addr);	
			var br = document.createElement("br");
			element.appendChild(br);			
			element.appendChild(rest_Zip);
			document.body.appendChild(element);
			document.body.appendChild(x);
			
		 }
		 
		 if(restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue.toUpperCase()==dataCuisine.toUpperCase() && dataZip=="" && dataName=="")
		 {
			flag =1;
			var rName=restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
			var rAddress=restaurant[i].getElementsByTagName("Address")[0].childNodes[0].nodeValue;
			var rZipCode=restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue;
			var rCuisine=restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue;
			var element=document.createElement("p");
			var rest_Name=document.createTextNode(rName);				
			var rest_Addr=document.createTextNode(rAddress);
			var rest_Zip=document.createTextNode(rZipCode);
			var rest_Cuisine=document.createTextNode(rCuisine);
			element.appendChild(rest_Name);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Addr);	
			var br = document.createElement("br");
			element.appendChild(br);			
			element.appendChild(rest_Zip);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Cuisine);
			document.body.appendChild(element);
			document.body.appendChild(x);
			
		 }
		 
		 if(restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue==dataZip &&
		  restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue.toUpperCase()==dataName.toUpperCase())		 
		 {
			flag =1;
			var rName=restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
			var rAddress=restaurant[i].getElementsByTagName("Address")[0].childNodes[0].nodeValue;
			var rZipCode=restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue;
			var rCuisine=restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue;
			var element=document.createElement("p");
			var rest_Name=document.createTextNode(rName);				
			var rest_Addr=document.createTextNode(rAddress);
			var rest_Zip=document.createTextNode(rZipCode);
			var rest_Cuisine=document.createTextNode(rCuisine);
			element.appendChild(rest_Name);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Addr);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Zip);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Cuisine);
			document.body.appendChild(element);
			document.body.appendChild(x);
			
		 }
		  if(restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue==dataCuisine &&
		  restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue.toUpperCase()==dataName.toUpperCase())		 
		 {
			flag =1;
			var rName=restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
			var rAddress=restaurant[i].getElementsByTagName("Address")[0].childNodes[0].nodeValue;
			var rZipCode=restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue;
			var rCuisine=restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue;
			var element=document.createElement("p");
			var rest_Name=document.createTextNode(rName);			
			var rest_Addr=document.createTextNode(rAddress);
			var rest_Zip=document.createTextNode(rZipCode);
			var rest_Cuisine=document.createTextNode(rCuisine);
			element.appendChild(rest_Name);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Addr);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Zip);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Cuisine);			
			document.body.appendChild(element);
			document.body.appendChild(x);
			
		 }
		 
		 if(restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue==dataCuisine &&
		  restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue.toUpperCase()==dataZip.toUpperCase())		 
		 {
			flag =1;
			var rName=restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
			var rAddress=restaurant[i].getElementsByTagName("Address")[0].childNodes[0].nodeValue;
			var rZipCode=restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue;
			var rCuisine=restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue;
			var element=document.createElement("p");			
			var rest_Name=document.createTextNode(rName);
			var rest_Addr=document.createTextNode(rAddress);
			var rest_Zip=document.createTextNode(rZipCode);
			var rest_Cuisine=document.createTextNode(rCuisine);
			element.appendChild(rest_Name);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Addr);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Zip);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Cuisine);			
			document.body.appendChild(element);
			document.body.appendChild(x);
			
		 }
		 
		 if(restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue==dataCuisine &&
		  restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue.toUpperCase()==dataZip.toUpperCase() &&
		  restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue.toUpperCase()==dataName.toUpperCase())		 
		 {
			flag =1;
			var rName=restaurant[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue;
			var rAddress=restaurant[i].getElementsByTagName("Address")[0].childNodes[0].nodeValue;
			var rZipCode=restaurant[i].getElementsByTagName("Zip")[0].childNodes[0].nodeValue;
			var rCuisine=restaurant[i].getElementsByTagName("Cuisine")[0].childNodes[0].nodeValue;
			var element=document.createElement("p");
			var rest_Name=document.createTextNode(rName);			
			var rest_Addr=document.createTextNode(rAddress);
			var rest_Zip=document.createTextNode(rZipCode);
			var rest_Cuisine=document.createTextNode(rCuisine);
			element.appendChild(rest_Name);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Addr);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Zip);
			var br = document.createElement("br");
			element.appendChild(br);
			element.appendChild(rest_Cuisine);			
			document.body.appendChild(element);
			document.body.appendChild(x);
			
		 }
		 
		
		 
	 	 
	 }
		
}

</script>

</body>
</html>